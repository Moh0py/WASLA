{% extends 'main/base.html' %}
{% load static %}

{% block title %} Hackathon Details {% endblock %}

{% block content %}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

<section class="py-5">
  <div class="container">
    <div class="row g-4 align-items-center">
      
      <div class="col-12 text-center">
  <div class="ratio ratio-16x9 shadow rounded-4 mb-4 mx-auto" style="max-width:960px;">
    <img
      src="{{ hackathon.logo.url }}"
      class="w-100 h-100 object-fit-cover rounded-4"
      alt="{{ hackathon.title }}">
  </div>
</div>
{% if hackathon.status == 'OPENED' %}
<div class="container" id="register">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <div class="border-0 rounded-4 text-center p-5">
        <div class="bg-black bg-opacity-25 rounded-4 p-5">
          <h2 class="fw-bold text-white display-5 mb-4">Ready to join?</h2>
         
          <div class="d-flex flex-wrap justify-content-center gap-3">
            <a href="{% url 'accounting:accounting_create_team' hackathon.id %}" class="btn btn-outline-info btn-lg rounded-pill px-5 py-3 fw-bold">
              Create Team
            </a>
            <a href="{% url 'accounting:accounting_teams_search' hackathon.id %}" class="btn btn-outline-light btn-lg rounded-pill px-5 py-3 fw-bold">
              Join Team
            </a>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>
{% endif %}
<div class="col-12">
  <div class="mb-5 text-white">
    <div class="border-0">
      <div class="rounded-4 bg-black bg-opacity-25 p-4">

        <div class="mb-5">
          <h3 class="fw-bold mb-3">About</h3>
          <h3 class="mb-0">
            {{ hackathon.description }}
          </h3>
        </div>

        <div class="mb-4">
          <h3 class="fw-bold">Event Details</h3>
        </div>

        <ul class="list-unstyled mt-3">
          <ul class="list-unstyled mb-4">
            <li class="mb-2">
              <i class="bi bi-geo-alt-fill me-2 text-primary"></i>
              <strong>Location:</strong> {{ hackathon.location }}
            </li>
            <li class="mb-2">
              <i class="bi bi-calendar-event me-2 text-success"></i>
              <strong>Date:</strong> {{ hackathon.start_date|date:"F d, Y" }}
            </li>
            <li>
              <i class="bi bi-hourglass-split me-2 text-info"></i>
              <strong>Duration:</strong> 
              {{ hackathon.end_date|timeuntil:hackathon.start_date }}
            </li>
          </ul>

          {% if hackathon.status == 'OPENED' %}
            <p class="fw-bold mb-2">Starts in</p>
            
            <span class="badge bg-success text-white fw-bold rounded-pill px-2 py-1 fs-6">
              {{ hackathon.start_date }}
            </span>
         
            <p class="fw-bold my-2">Status</p>
            <span class="badge bg-success fw-bold rounded-pill px-2 py-1 fs-6">
              Opened
            </span>
           
          {% else %}
            <p class="fw-bold mb-2">Status</p>
            <span class="badge bg-danger fw-bold rounded-pill px-2 py-1 fs-6">
              Closed
            </span>
          {% endif %}

          <p class="small text-white mt-2 mb-0">
            Registration closed: 
            <strong>{{ hackathon.end_date|date:"F d, Y" }}</strong>
          </p>
        </ul>

      </div>
    </div>
  </div>
</div>

      </div>

    </div>
  </div>
</section>

<section>
  <div class="container py-3">
<div class="mb-5">
  <h3 class="fw-bold mb-5 text-white text-center"> Hackathon Tracks</h3>
 <div class="row g-4 justify-content-center">
  {% for track in hackathon.hackathon_track.all %}
  <div class="col-12 col-sm-6 col-md-4 col-lg-3 d-flex">
    <div class="card bg-black bg-opacity-25 text-light border-0 rounded-4 shadow-lg h-100 w-100">
      <div class="p-4 text-center">
        <h5 class="fw-bold mb-2">{{ track.name }}</h5>
        <p class="mb-0 small opacity-75">{{ track.description }}</p>
      </div>
    </div>
  </div>
  {% empty %}
  <div class="col-12 text-center text-muted">No tracks yet</div>
  {% endfor %}
</div>

</div>
    <h3 class="fw-bold text-white mb-5 text-center">Timeline</h3>

    <div class="timeline position-relative">
  {% for stage in hackathon.hackathon_stage.all %}

    {% if forloop.counter|divisibleby:"2" %}
      <div class="row g-4 align-items-center mb-5 timeline-row">
        <div class="col-md-6 me-auto">
          <div class="stage-card border-purple">
            <span class="stage-num bg-purple">{{ forloop.counter }}</span>
            <div class="d-flex align-items-start gap-2">
              <i class="bi bi-flag fs-4 text-purple"></i>
              <div>
                <h5 class="mb-1 text-white">{{ stage.title }}</h5>
                <div class="small fw-medium text-purple">
                  {% if stage.end_date and stage.start_date != stage.end_date %}
                    {{ stage.start_date|date:"F j" }} â€“ {{ stage.end_date|date:"F j" }}
                  {% else %}
                    {{ stage.start_date|date:"F j" }}
                  {% endif %}
                </div>
                {% if stage.description %}
                  <p class="small text-white-50">{{ stage.description }}</p>
                {% endif %}
              </div>
            </div>
          </div>
        </div>
      </div>
    {% else %}
      <div class="row g-4 align-items-center mb-5 timeline-row">
        <div class="col-md-6 ms-auto">
          <div class="stage-card border-orange">
            <span class="stage-num bg-orange">{{ forloop.counter }}</span>
            <div class="d-flex align-items-start gap-2">
              <i class="bi bi-flag fs-4 text-orange"></i>
              <div>
                <h5 class="mb-1 text-white">{{ stage.title }}</h5>
                <div class="small fw-medium text-orange">
                  {% if stage.end_date and stage.start_date != stage.end_date %}
                    {{ stage.start_date|date:"F j" }} â€“ {{ stage.end_date|date:"F j" }}
                  {% else %}
                    {{ stage.start_date|date:"F j" }}
                  {% endif %}
                </div>
                {% if stage.description %}
                  <p class="small text-white-50">{{ stage.description }}</p>
                {% endif %}
              </div>
            </div>
          </div>
        </div>
      </div>
    {% endif %}

  {% endfor %}
</div>

  </div>
</section>

<style>
  
.timeline .timeline-row {
  position: relative;
}
@media (min-width: 768px) {
  .timeline .timeline-row::before {
    content: "";
    position: absolute;
    inset-inline: 0;
    top: 28px;
    height: 2px;
    background: rgba(255,255,255,.08);
  }
}

.stage-card{
  position: relative;
  border: 2px solid transparent;
  color:#cfe4ee;
  border-radius: 18px;
  padding: 1.25rem;
  box-shadow: 0 10px 24px rgba(0,0,0,.25);
}

.stage-num{
  position: absolute;
  left: -18px;
  top: -14px;
  width: 44px;
  height: 44px;
  border-radius: 12px;
  display: grid;
  place-items: center;
  font-weight: 700;
  color: #fff;
  border: 2px solid rgba(255,255,255,.9);
  box-shadow: 0 8px 18px rgba(0,0,0,.25);
}
.text-orange{ color:#e47a42 !important; }
.border-orange{ border-color:#e47a42 !important; }
.bg-orange{ background:#e47a42; }

.text-purple{ color:#8f88ff !important; }
.border-purple{ border-color:#8f88ff !important; }
.bg-purple{ background:#8f88ff; }

.stage-card{ border-radius: 20px; }
.stage-card i{ opacity:.95; }

 .card {
    transition: all 0.3s ease;
  }
 
   .scale-up {
    transform: scale(1.05);
    z-index: 2;
  }
 
  .card:hover {
    transform: translateY(-8px);
  }
</style>

<section class="">
  <div class="container ">

<div class="mb-5 d-flex justify-content-center">
  <div class="container">
    <h3 class="fw-bold mb-3 text-white text-center my-5">Judges</h3>


<div class="row g-4 row-cols-1 row-cols-md-3 my-5 justify-content-center">
  {% for judge in judges %}
    <div class="col mx-4">
      <div class="card h-100 bg-black bg-opacity-25 border-secondary text-white shadow-sm" style="min-width: 350px;">
        <div class="text-center px-2">
          <h4 class="my-2">{{ judge.judge_name }}</h4>
          <h6 class="mb-2">{{ judge.judge_email }}</h6>
          <h6 class="mb-4">{{ judge.judge_phone }}</h6>
        </div>
      </div>
    </div>
  {% empty %}
    <div class="col">
      <div class="card h-100 bg-black bg-opacity-25 border-secondary text-white shadow-sm">
        <div class="text-center">
          <h4 class="my-4">No judges have been added yet</h4>
        </div>
      </div>
    </div>
  {% endfor %}
</div>


  </div>
</div>

<div class="mb-5">
  <h3 class="fw-bold mb-4 text-center text-white">Prizes</h3>
  <div class="row g-4 justify-content-center align-items-end">

    {% for prize in prizes %}
      {% if forloop.counter == 2 %}
        <div class="col-md-3 order-2 order-md-1">
          <div class="card border-0 shadow-lg rounded-4 bg-black bg-opacity-25 text-center h-100">
            <div class="p-4 position-relative">
              <div class="rounded-circle d-flex align-items-center justify-content-center mx-auto mb-3" 
                   style="width:70px; height:70px; font-size:1.8rem; background:#C0C0C0; color:#fff;">
                ðŸ¥ˆ
              </div>
              <h5 class="fw-bold text-secondary">2nd Place</h5>
              <p class="display-6 fw-bold text-white mb-2">{{ prize.amount }} SR</p>
              <h4 class=" text-white">{{ prize.title }}</h4>
            </div>
          </div>
        </div>
      {% endif %}
    {% endfor %}

    {% for prize in prizes %}
      {% if forloop.counter == 1 %}
        <div class="col-md-4 order-1 order-md-2">
          <div class="card border-0 shadow-lg rounded-4 text-center h-100 scale-up"
               style="background:linear-gradient(135deg, #FFD700, #FFEA85);">
            <div class="p-5 position-relative text-dark">
              <div class="rounded-circle d-flex align-items-center justify-content-center mx-auto mb-3" 
                   style="width:100px; height:100px; font-size:2.5rem; font-weight:bold; color:#fff; box-shadow:0 0 15px rgba(255,215,0,0.6);">
                ðŸ¥‡
              </div>
              <h4 class="fw-bold text-dark">1st Place</h4>
              <p class="display-4 fw-bold mb-2">{{ prize.amount }} SR</p>
              <h4 class=" text-dark">{{ prize.title }}</h4>
            </div>
          </div>
        </div>
      {% endif %}
    {% endfor %}

    {% for prize in prizes %}
      {% if forloop.counter == 3 %}
        <div class="col-md-3 order-3 order-md-3">
          <div class="card border-0 shadow-lg rounded-4 bg-black bg-opacity-25 text-center h-100">
            <div class="p-4 position-relative">
              <div class="rounded-circle d-flex align-items-center justify-content-center mx-auto mb-3" 
                   style="width:70px; height:70px; font-size:1.8rem; background:#CD7F32; color:#fff;">
                ðŸ¥‰
              </div>
              <h5 class="fw-bold" style="color:#CD7F32;">3rd Place</h5>
              <p class="display-6 fw-bold text-white mb-2">{{ prize.amount }} SR</p>
              <p class=" text-white">{{ prize.title }}</p>
            </div>
          </div>
        </div>
      {% endif %}
    {% endfor %}

  </div>
</div>
<div class="mb-5">
  <div class="border-0 ">
    <div class="card-body bg-black bg-opacity-25 p-4">
      <div class="d-flex align-items-center mb-4">
        <span class="badge rounded-pill text-bg-primary me-3 px-3 py-2">Rules</span>
        <h3 class="fw-bold text-white mb-0">Rules &amp; Eligibility</h3>
      </div>

      <ul class="rounded-2">
        {% for requirement in hackathon.hackathon_requirement.all %}
          <li class="list-group-item text-white px-0 py-3 d-flex">
            <span class="me-3 mx-4">âœ”</span>
            <h5>{{ requirement.description }}</h5>
          </li>
        {% empty %}
          <li class="list-group-item text-white px-0 py-3">
            No requirements have been added yet.
          </li>
        {% endfor %}
      </ul>
    </div>
  </div>
</div>


    

</section>


{% endblock %}
